version: 1.0

runtime: python3

build:
  env:
    - name: DB_USER
      value: "marko"
    - name: DB_PASSWORD
      value: "markomarko"
    - name: DB_NAME
      value: "database"
    - name: DB_HOST
      value: "database.cl3izvauicsy.eu-west-1.rds.amazonaws.com"
    - name: REDIS_HOST
      value: "10633.c3.eu-west-1-2.ec2.cloud.redislabs.com"
    - name: REDIS_PORT
      value: "10633"
    - name: REDIS_PASSWORD
      value: "w7v6XPSL6BhROoYYekYGGdle5mq5UUom"
    - name: APP_SECRET_STRING
      value: "eYVX7EwVmmxKPCDmwMtyKVge8oLd2t81"
    - name: DOMAIN
      value: "dev-38rl6a10.us.auth0.com"
    - name: API_AUDIENCE
      value: "https://internship-auth0-example.com"
    - name: ISSUER
      value: "https://dev-38rl6a10.us.auth0.com/"
    - name: ALGORITHMS
      value: "RS256"
  
  
  commands:
    build:
      - pip install -r requirements.txt
    post-build:
      - alembic upgrade head 
      
run:
  network:
    port: 8000
  command: uvicorn main:app --reload
  
